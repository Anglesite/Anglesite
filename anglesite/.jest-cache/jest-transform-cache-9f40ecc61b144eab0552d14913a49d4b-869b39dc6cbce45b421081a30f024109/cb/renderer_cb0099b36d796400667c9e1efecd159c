9f3263fa3ae86858d5710eade1ed172c
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.initializeRenderer = initializeRenderer;
exports.logElectronAPIAvailability = logElectronAPIAvailability;
exports.logDocumentReadyState = logDocumentReadyState;
exports.sendRendererLoadedMessage = sendRendererLoadedMessage;
exports.registerShowWebsiteNameInputListener = registerShowWebsiteNameInputListener;
exports.setupButtonEventHandlers = setupButtonEventHandlers;
exports.registerMenuEventListeners = registerMenuEventListeners;
exports.setupDOMContentLoadedHandler = setupDOMContentLoadedHandler;
/**
 * @file Renderer process for the Electron application.
 * @see {@link https://www.electronjs.org/docs/latest/tutorial/process-model#renderer-process}
 */
// Export functions for testing
function initializeRenderer() {
    // Renderer initialization
}
function logElectronAPIAvailability() {
    // Check electronAPI availability
}
function logDocumentReadyState() {
    // Check document ready state
}
function sendRendererLoadedMessage() {
    // Send a message to main process to confirm renderer is loaded
    if (window.electronAPI) {
        window.electronAPI.send('renderer-loaded', 'Renderer is working!');
    }
}
// Execute initialization when running as script
initializeRenderer();
logElectronAPIAvailability();
logDocumentReadyState();
sendRendererLoadedMessage();
function registerShowWebsiteNameInputListener() {
    try {
        if (window.electronAPI && window.electronAPI.on) {
            window.electronAPI.on('show-website-name-input', () => {
                const websiteName = prompt('Enter a name for your new website:', 'My Website');
                if (websiteName && websiteName.trim()) {
                    window.electronAPI.send('create-website-with-name', websiteName.trim());
                }
            });
        }
        else {
            console.error('No electronAPI available');
        }
    }
    catch (error) {
        console.error('Error setting up listener:', error);
    }
}
// Execute when running as script
registerShowWebsiteNameInputListener();
function setupButtonEventHandlers() {
    const newWebsiteButton = document.getElementById('new-website');
    const previewButton = document.getElementById('preview');
    const openBrowserButton = document.getElementById('open-browser');
    const reloadButton = document.getElementById('reload');
    const devToolsButton = document.getElementById('devtools');
    /**
     * Adds event listener to the new website button.
     * @returns {void}
     */
    if (newWebsiteButton) {
        newWebsiteButton.addEventListener('click', () => {
            window.electronAPI.send('new-website');
        });
    }
    /**
     * Adds event listener to the preview button to load the site preview.
     * @returns {void}
     */
    if (previewButton) {
        previewButton.addEventListener('click', () => {
            console.log('Preview button clicked');
            window.electronAPI.send('preview');
        });
    }
    /**
     * Adds event listener to the open browser button to open the site in external browser.
     * @returns {void}
     */
    if (openBrowserButton) {
        openBrowserButton.addEventListener('click', () => {
            window.electronAPI.send('open-browser');
        });
    }
    /**
     * Adds event listener to the reload button to refresh the site preview.
     * @returns {void}
     */
    if (reloadButton) {
        reloadButton.addEventListener('click', () => {
            console.log('Reload button clicked');
            window.electronAPI.send('reload-preview');
        });
    }
    /**
     * Adds event listener to the DevTools button to toggle dev tools.
     * @returns {void}
     */
    if (devToolsButton) {
        devToolsButton.addEventListener('click', () => {
            console.log('DevTools button clicked - sending IPC message');
            window.electronAPI.send('toggle-devtools');
            console.log('IPC message sent');
        });
    }
    else {
        console.error('DevTools button not found!');
    }
}
// Execute when running as script
setupButtonEventHandlers();
function registerMenuEventListeners() {
    /**
     * Listens for preview loaded events from the main process.
     * @returns {void}
     */
    window.electronAPI.on('preview-loaded', () => {
        console.log('Preview BrowserView loaded');
    });
    /**
     * Handle menu events from the application menu.
     * @returns {void}
     */
    window.electronAPI.on('menu-new-website', () => {
        window.electronAPI.send('new-website');
    });
    // Handle trigger-new-website from menu
    window.electronAPI.on('trigger-new-website', () => {
        window.electronAPI.send('new-website');
    });
    window.electronAPI.on('menu-reload', () => {
        const reloadButton = document.getElementById('reload');
        if (reloadButton) {
            reloadButton.click();
        }
    });
    window.electronAPI.on('menu-toggle-devtools', () => {
        const devToolsButton = document.getElementById('devtools');
        if (devToolsButton) {
            devToolsButton.click();
        }
    });
    window.electronAPI.on('menu-export-site', () => {
        console.log('Export site requested from menu');
        window.electronAPI.send('export-site');
    });
}
// Execute when running as script
registerMenuEventListeners();
function setupDOMContentLoadedHandler() {
    /**
     * Add console log to confirm renderer is loaded.
     * @returns {void}
     */
    window.addEventListener('DOMContentLoaded', () => {
        // Renderer loaded successfully with BrowserView support
        // Setting up menu event listeners is handled elsewhere
    });
}
// Execute when running as script
setupDOMContentLoadedHandler();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2R3ay9EZXZlbG9wZXIvZ2l0bGFiLmNvbS9kYXZpZHdrZWl0aC9AZHdrL2FuZ2xlc2l0ZS9kaXN0L2FwcC9yZW5kZXJlci5qcyIsIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFDYixNQUFNLENBQUMsY0FBYyxDQUFDLE9BQU8sRUFBRSxZQUFZLEVBQUUsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUM5RCxPQUFPLENBQUMsa0JBQWtCLEdBQUcsa0JBQWtCLENBQUM7QUFDaEQsT0FBTyxDQUFDLDBCQUEwQixHQUFHLDBCQUEwQixDQUFDO0FBQ2hFLE9BQU8sQ0FBQyxxQkFBcUIsR0FBRyxxQkFBcUIsQ0FBQztBQUN0RCxPQUFPLENBQUMseUJBQXlCLEdBQUcseUJBQXlCLENBQUM7QUFDOUQsT0FBTyxDQUFDLG9DQUFvQyxHQUFHLG9DQUFvQyxDQUFDO0FBQ3BGLE9BQU8sQ0FBQyx3QkFBd0IsR0FBRyx3QkFBd0IsQ0FBQztBQUM1RCxPQUFPLENBQUMsMEJBQTBCLEdBQUcsMEJBQTBCLENBQUM7QUFDaEUsT0FBTyxDQUFDLDRCQUE0QixHQUFHLDRCQUE0QixDQUFDO0FBQ3BFOzs7R0FHRztBQUNILCtCQUErQjtBQUMvQixTQUFTLGtCQUFrQjtJQUN2QiwwQkFBMEI7QUFDOUIsQ0FBQztBQUNELFNBQVMsMEJBQTBCO0lBQy9CLGlDQUFpQztBQUNyQyxDQUFDO0FBQ0QsU0FBUyxxQkFBcUI7SUFDMUIsNkJBQTZCO0FBQ2pDLENBQUM7QUFDRCxTQUFTLHlCQUF5QjtJQUM5QiwrREFBK0Q7SUFDL0QsSUFBSSxNQUFNLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDckIsTUFBTSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsc0JBQXNCLENBQUMsQ0FBQztJQUN2RSxDQUFDO0FBQ0wsQ0FBQztBQUNELGdEQUFnRDtBQUNoRCxrQkFBa0IsRUFBRSxDQUFDO0FBQ3JCLDBCQUEwQixFQUFFLENBQUM7QUFDN0IscUJBQXFCLEVBQUUsQ0FBQztB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QUFDLEVBQUUsQ0FBQyxzQkFBc0IsRUFBRSxHQUFHLEVBQUU7UUFDL0MsTUFBTSxjQUFjLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUMzRCxJQUFJLGNBQWMsRUFBRSxDQUFDO1lBQ2pCLGNBQWMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUMzQixDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDSCxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxrQkFBa0IsRUFBRSxHQUFHLEVBQUU7UUFDM0MsT0FBTyxDQUFDLEdBQUcsQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO1FBQy9DLE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQzNDLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQztBQUNELGlDQUFpQztBQUNqQywwQkFBMEIsRUFBRSxDQUFDO0FBQzdCLFNBQVMsNEJBQTRCO0lBQ2pDOzs7T0FHRztJQUNILE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsRUFBRSxHQUFHLEVBQUU7UUFDN0Msd0RBQXdEO1FBQ3hELHVEQUF1RDtJQUMzRCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUM7QUFDRCxpQ0FBaUM7QUFDakMsNEJBQTRCLEVBQUUsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvZHdrL0RldmVsb3Blci9naXRsYWIuY29tL2Rhdmlkd2tlaXRoL0Bkd2svYW5nbGVzaXRlL2Rpc3QvYXBwL3JlbmRlcmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5pbml0aWFsaXplUmVuZGVyZXIgPSBpbml0aWFsaXplUmVuZGVyZXI7XG5leHBvcnRzLmxvZ0VsZWN0cm9uQVBJQXZhaWxhYmlsaXR5ID0gbG9nRWxlY3Ryb25BUElBdmFpbGFiaWxpdHk7XG5leHBvcnRzLmxvZ0RvY3VtZW50UmVhZHlTdGF0ZSA9IGxvZ0RvY3VtZW50UmVhZHlTdGF0ZTtcbmV4cG9ydHMuc2VuZFJlbmRlcmVyTG9hZGVkTWVzc2FnZSA9IHNlbmRSZW5kZXJlckxvYWRlZE1lc3NhZ2U7XG5leHBvcnRzLnJlZ2lzdGVyU2hvd1dlYnNpdGVOYW1lSW5wdXRMaXN0ZW5lciA9IHJlZ2lzdGVyU2hvd1dlYnNpdGVOYW1lSW5wdXRMaXN0ZW5lcjtcbmV4cG9ydHMuc2V0dXBCdXR0b25FdmVudEhhbmRsZXJzID0gc2V0dXBCdXR0b25FdmVudEhhbmRsZXJzO1xuZXhwb3J0cy5yZWdpc3Rlck1lbnVFdmVudExpc3RlbmVycyA9IHJlZ2lzdGVyTWVudUV2ZW50TGlzdGVuZXJzO1xuZXhwb3J0cy5zZXR1cERPTUNvbnRlbnRMb2FkZWRIYW5kbGVyID0gc2V0dXBET01Db250ZW50TG9hZGVkSGFuZGxlcjtcbi8qKlxuICogQGZpbGUgUmVuZGVyZXIgcHJvY2VzcyBmb3IgdGhlIEVsZWN0cm9uIGFwcGxpY2F0aW9uLlxuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly93d3cuZWxlY3Ryb25qcy5vcmcvZG9jcy9sYXRlc3QvdHV0b3JpYWwvcHJvY2Vzcy1tb2RlbCNyZW5kZXJlci1wcm9jZXNzfVxuICovXG4vLyBFeHBvcnQgZnVuY3Rpb25zIGZvciB0ZXN0aW5nXG5mdW5jdGlvbiBpbml0aWFsaXplUmVuZGVyZXIoKSB7XG4gICAgLy8gUmVuZGVyZXIgaW5pdGlhbGl6YXRpb25cbn1cbmZ1bmN0aW9uIGxvZ0VsZWN0cm9uQVBJQXZhaWxhYmlsaXR5KCkge1xuICAgIC8vIENoZWNrIGVsZWN0cm9uQVBJIGF2YWlsYWJpbGl0eVxufVxuZnVuY3Rpb24gbG9nRG9jdW1lbnRSZWFkeVN0YXRlKCkge1xuICAgIC8vIENoZWNrIGRvY3VtZW50IHJlYWR5IHN0YXRlXG59XG5mdW5jdGlvbiBzZW5kUmVuZGVyZXJMb2FkZWRNZXNzYWdlKCkge1xuICAgIC8vIFNlbmQgYSBtZXNzYWdlIHRvIG1haW4gcHJvY2VzcyB0byBjb25maXJtIHJlbmRlcmVyIGlzIGxvYWRlZFxuICAgIGlmICh3aW5kb3cuZWxlY3Ryb25BUEkpIHtcbiAgICAgICAgd2luZG93LmVsZWN0cm9uQVBJLnNlbmQoJ3JlbmRlcmVyLWxvYWRlZCcsICdSZW5kZXJlciBpcyB3b3JraW5nIScpO1xuICAgIH1cbn1cbi8vIEV4ZWN1dGUgaW5pdGlhbGl6YXRpb24gd2hlbiBydW5uaW5nIGFzIHNjcmlwdFxuaW5pdGlhbGl6ZVJlbmRlcmVyKCk7XG5sb2dFbGVjdHJvbkFQSUF2YWlsYWJpbGl0eSgpO1xubG9nRG9jdW1lbnRSZWFkeVN0YXRlKCk7XG5zZW5kUmVuZGVyZXJMb2FkZWRNZXNzYWdlKCk7XG5mdW5jdGlvbiByZWdpc3RlclNob3dXZWJzaXRlTmFtZUlucHV0TGlzdGVuZXIoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHdpbmRvdy5lbGVjdHJvbkFQSSAmJiB3aW5kb3cuZWxlY3Ryb25BUEkub24pIHtcbiAgICAgICAgICAgIHdpbmRvdy5lbGVjdHJvbkFQSS5vbignc2hvdy13ZWJzaXRlLW5hbWUtaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgd2Vic2l0ZU5hbWUgPSBwcm9tcHQoJ0VudGVyIGEgbmFtZSBmb3IgeW91ciBuZXcgd2Vic2l0ZTonLCAnTXkgV2Vic2l0ZScpO1xuICAgICAgICAgICAgICAgIGlmICh3ZWJzaXRlTmFtZSAmJiB3ZWJzaXRlTmFtZS50cmltKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmVsZWN0cm9uQVBJLnNlbmQoJ2NyZWF0ZS13ZWJzaXRlLXdpdGgtbmFtZScsIHdlYnNpdGVOYW1lLnRyaW0oKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdObyBlbGVjdHJvbkFQSSBhdmFpbGFibGUnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2V0dGluZyB1cCBsaXN0ZW5lcjonLCBlcnJvcik7XG4gICAgfVxufVxuLy8gRXhlY3V0ZSB3aGVuIHJ1bm5pbmcgYXMgc2NyaXB0XG5yZWdpc3RlclNob3dXZWJzaXRlTmFtZUlucHV0TGlzdGVuZXIoKTtcbmZ1bmN0aW9uIHNldHVwQnV0dG9uRXZlbnRIYW5kbGVycygpIHtcbiAgICBjb25zdCBuZXdXZWJzaXRlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ldy13ZWJzaXRlJyk7XG4gICAgY29uc3QgcHJldmlld0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmV2aWV3Jyk7XG4gICAgY29uc3Qgb3BlbkJyb3dzZXJCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3Blbi1icm93c2VyJyk7XG4gICAgY29uc3QgcmVsb2FkQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlbG9hZCcpO1xuICAgIGNvbnN0IGRldlRvb2xzQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldnRvb2xzJyk7XG4gICAgLyoqXG4gICAgICogQWRkcyBldmVudCBsaXN0ZW5lciB0byB0aGUgbmV3IHdlYnNpdGUgYnV0dG9uLlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqL1xuICAgIGlmIChuZXdXZWJzaXRlQnV0dG9uKSB7XG4gICAgICAgIG5ld1dlYnNpdGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB3aW5kb3cuZWxlY3Ryb25BUEkuc2VuZCgnbmV3LXdlYnNpdGUnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgZXZlbnQgbGlzdGVuZXIgdG8gdGhlIHByZXZpZXcgYnV0dG9uIHRvIGxvYWQgdGhlIHNpdGUgcHJldmlldy5cbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKi9cbiAgICBpZiAocHJldmlld0J1dHRvbikge1xuICAgICAgICBwcmV2aWV3QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1ByZXZpZXcgYnV0dG9uIGNsaWNrZWQnKTtcbiAgICAgICAgICAgIHdpbmRvdy5lbGVjdHJvbkFQSS5zZW5kKCdwcmV2aWV3Jyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGV2ZW50IGxpc3RlbmVyIHRvIHRoZSBvcGVuIGJyb3dzZXIgYnV0dG9uIHRvIG9wZW4gdGhlIHNpdGUgaW4gZXh0ZXJuYWwgYnJvd3Nlci5cbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKi9cbiAgICBpZiAob3BlbkJyb3dzZXJCdXR0b24pIHtcbiAgICAgICAgb3BlbkJyb3dzZXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB3aW5kb3cuZWxlY3Ryb25BUEkuc2VuZCgnb3Blbi1icm93c2VyJyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGV2ZW50IGxpc3RlbmVyIHRvIHRoZSByZWxvYWQgYnV0dG9uIHRvIHJlZnJlc2ggdGhlIHNpdGUgcHJldmlldy5cbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKi9cbiAgICBpZiAocmVsb2FkQnV0dG9uKSB7XG4gICAgICAgIHJlbG9hZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSZWxvYWQgYnV0dG9uIGNsaWNrZWQnKTtcbiAgICAgICAgICAgIHdpbmRvdy5lbGVjdHJvbkFQSS5zZW5kKCdyZWxvYWQtcHJldmlldycpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBldmVudCBsaXN0ZW5lciB0byB0aGUgRGV2VG9vbHMgYnV0dG9uIHRvIHRvZ2dsZSBkZXYgdG9vbHMuXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICovXG4gICAgaWYgKGRldlRvb2xzQnV0dG9uKSB7XG4gICAgICAgIGRldlRvb2xzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0RldlRvb2xzIGJ1dHRvbiBjbGlja2VkIC0gc2VuZGluZyBJUEMgbWVzc2FnZScpO1xuICAgICAgICAgICAgd2luZG93LmVsZWN0cm9uQVBJLnNlbmQoJ3RvZ2dsZS1kZXZ0b29scycpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0lQQyBtZXNzYWdlIHNlbnQnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdEZXZUb29scyBidXR0b24gbm90IGZvdW5kIScpO1xuICAgIH1cbn1cbi8vIEV4ZWN1dGUgd2hlbiBydW5uaW5nIGFzIHNjcmlwdFxuc2V0dXBCdXR0b25FdmVudEhhbmRsZXJzKCk7XG5mdW5jdGlvbiByZWdpc3Rlck1lbnVFdmVudExpc3RlbmVycygpIHtcbiAgICAvKipcbiAgICAgKiBMaXN0ZW5zIGZvciBwcmV2aWV3IGxvYWRlZCBldmVudHMgZnJvbSB0aGUgbWFpbiBwcm9jZXNzLlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqL1xuICAgIHdpbmRvdy5lbGVjdHJvbkFQSS5vbigncHJldmlldy1sb2FkZWQnLCAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdQcmV2aWV3IEJyb3dzZXJWaWV3IGxvYWRlZCcpO1xuICAgIH0pO1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBtZW51IGV2ZW50cyBmcm9tIHRoZSBhcHBsaWNhdGlvbiBtZW51LlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqL1xuICAgIHdpbmRvdy5lbGVjdHJvbkFQSS5vbignbWVudS1uZXctd2Vic2l0ZScsICgpID0+IHtcbiAgICAgICAgd2luZG93LmVsZWN0cm9uQVBJLnNlbmQoJ25ldy13ZWJzaXRlJyk7XG4gICAgfSk7XG4gICAgLy8gSGFuZGxlIHRyaWdnZXItbmV3LXdlYnNpdGUgZnJvbSBtZW51XG4gICAgd2luZG93LmVsZWN0cm9uQVBJLm9uKCd0cmlnZ2VyLW5ldy13ZWJzaXRlJywgKCkgPT4ge1xuICAgICAgICB3aW5kb3cuZWxlY3Ryb25BUEkuc2VuZCgnbmV3LXdlYnNpdGUnKTtcbiAgICB9KTtcbiAgICB3aW5kb3cuZWxlY3Ryb25BUEkub24oJ21lbnUtcmVsb2FkJywgKCkgPT4ge1xuICAgICAgICBjb25zdCByZWxvYWRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVsb2FkJyk7XG4gICAgICAgIGlmIChyZWxvYWRCdXR0b24pIHtcbiAgICAgICAgICAgIHJlbG9hZEJ1dHRvbi5jbGljaygpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgd2luZG93LmVsZWN0cm9uQVBJLm9uKCdtZW51LXRvZ2dsZS1kZXZ0b29scycsICgpID0+IHtcbiAgICAgICAgY29uc3QgZGV2VG9vbHNCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGV2dG9vbHMnKTtcbiAgICAgICAgaWYgKGRldlRvb2xzQnV0dG9uKSB7XG4gICAgICAgICAgICBkZXZUb29sc0J1dHRvbi5jbGljaygpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgd2luZG93LmVsZWN0cm9uQVBJLm9uKCdtZW51LWV4cG9ydC1zaXRlJywgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnRXhwb3J0IHNpdGUgcmVxdWVzdGVkIGZyb20gbWVudScpO1xuICAgICAgICB3aW5kb3cuZWxlY3Ryb25BUEkuc2VuZCgnZXhwb3J0LXNpdGUnKTtcbiAgICB9KTtcbn1cbi8vIEV4ZWN1dGUgd2hlbiBydW5uaW5nIGFzIHNjcmlwdFxucmVnaXN0ZXJNZW51RXZlbnRMaXN0ZW5lcnMoKTtcbmZ1bmN0aW9uIHNldHVwRE9NQ29udGVudExvYWRlZEhhbmRsZXIoKSB7XG4gICAgLyoqXG4gICAgICogQWRkIGNvbnNvbGUgbG9nIHRvIGNvbmZpcm0gcmVuZGVyZXIgaXMgbG9hZGVkLlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqL1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICAgICAgICAvLyBSZW5kZXJlciBsb2FkZWQgc3VjY2Vzc2Z1bGx5IHdpdGggQnJvd3NlclZpZXcgc3VwcG9ydFxuICAgICAgICAvLyBTZXR0aW5nIHVwIG1lbnUgZXZlbnQgbGlzdGVuZXJzIGlzIGhhbmRsZWQgZWxzZXdoZXJlXG4gICAgfSk7XG59XG4vLyBFeGVjdXRlIHdoZW4gcnVubmluZyBhcyBzY3JpcHRcbnNldHVwRE9NQ29udGVudExvYWRlZEhhbmRsZXIoKTtcbiJdLCJ2ZXJzaW9uIjozfQ==