{"file":"/Users/dwk/Developer/gitlab.com/davidwkeith/@dwk/anglesite/app/eleventy/.eleventy.js","mappings":";AAAA,MAAM,iBAAiB,GAAG,OAAO,CAAC,qBAAqB,CAAC,CAAC;AACzD,MAAM,kBAAkB,GAAG,OAAO,CAAC,4BAA4B,CAAC,CAAC;AACjE,MAAM,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;AACzB,MAAM,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAE7B;;;;GAIG;AACH,MAAM,CAAC,OAAO,GAAG,UAAU,cAAc;IACvC,wHAAwH;IACxH,gGAAgG;IAChG,mFAAmF;IACnF,mGAAmG;IACnG,sEAAsE;IACtE,cAAc,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;IAE5C,2DAA2D;IAC3D,6DAA6D;IAC7D,cAAc,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAAC;IAE5C,8CAA8C;IAC9C,cAAc,CAAC,SAAS,CAAC,kBAAkB,EAAE;QAC3C,UAAU,EAAE,yBAAyB;KACtC,CAAC,CAAC;IAEH,sEAAsE;IACtE,cAAc,CAAC,aAAa,CAAC,UAAU,EAAE,GAAG,EAAE,CAAC,CAAC;QAC9C,SAAS,EAAE,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC,CAAC,aAAa,OAAO,CAAC,GAAG,CAAC,gBAAgB,EAAE,CAAC,CAAC,CAAC,UAAU;KACnG,CAAC,CAAC,CAAC;IAEJ,kDAAkD;IAClD,MAAM,cAAc,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,yBAAyB,CAAC,CAAC;IAC3E,IAAI,EAAE,CAAC,UAAU,CAAC,cAAc,CAAC,EAAE,CAAC;QAClC,cAAc,CAAC,mBAAmB,CAAC,WAAW,CAAC,CAAC;IAClD,CAAC;IAED,+DAA+D;IAC/D,gCAAgC;IAChC,OAAO;QACL,eAAe,EAAE,CAAC,SAAS,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,CAAC;QAClD,sBAAsB,EAAE,MAAM;QAC9B,kBAAkB,EAAE,MAAM;QAC1B,GAAG,EAAE;YACH,KAAK,EAAE,KAAK;YACZ,MAAM,EAAE,OAAO;YACf,QAAQ,EAAE,WAAW;YACrB,OAAO,EAAE,WAAW;SACrB;KACF,CAAC;AACJ,CAAC,CAAC","names":[],"sources":["/Users/dwk/Developer/gitlab.com/davidwkeith/@dwk/anglesite/app/eleventy/.eleventy.js"],"sourcesContent":["const anglesiteEleventy = require('@dwk/anglesite-11ty');\nconst EleventyWebcPlugin = require('@11ty/eleventy-plugin-webc');\nconst fs = require('fs');\nconst path = require('path');\n\n/**\n * Eleventy configuration function for Anglesite websites.\n * @param eleventyConfig Configuration object\n * @returns Configuration return object\n */\nmodule.exports = function (eleventyConfig) {\n  // FIXME: Workaround for a known issue in eleventy-plugin-webc (https://github.com/11ty/eleventy-plugin-webc/issues/86).\n  // When using `permalink` in front matter, especially with dynamic values or for non-HTML files,\n  // `page.url` may not be correctly populated or available to other plugins/filters.\n  // To avoid build errors and ensure consistent URL generation, explicitly duplicate the `permalink`\n  // value in `page.url` within the front matter for affected templates.\n  eleventyConfig.setFreezeReservedData(false);\n\n  // Anglesite 11ty is the configuration that Anglesite needs\n  // of an 11ty project for it to work with the UX of Anglesite\n  eleventyConfig.addPlugin(anglesiteEleventy);\n\n  // Override WebC configuration after anglesite\n  eleventyConfig.addPlugin(EleventyWebcPlugin, {\n    components: 'src/_includes/**/*.webc',\n  });\n\n  // Add global data functions to make data accessible to npm components\n  eleventyConfig.addGlobalData('eleventy', () => ({\n    generator: process.env.ELEVENTY_VERSION ? `Eleventy v${process.env.ELEVENTY_VERSION}` : 'Eleventy',\n  }));\n\n  // Check for base layout and configure accordingly\n  const baseLayoutPath = path.join(process.cwd(), 'src/_includes/base.webc');\n  if (fs.existsSync(baseLayoutPath)) {\n    eleventyConfig.setDataFileBaseName('anglesite');\n  }\n\n  // Update config for the actual website files to be in src/ for\n  // simpler editing in Anglesite.\n  return {\n    templateFormats: ['11ty.js', 'webc', 'md', 'html'],\n    markdownTemplateEngine: 'webc',\n    htmlTemplateEngine: 'webc',\n    dir: {\n      input: 'src',\n      output: '_site',\n      includes: '_includes',\n      layouts: '_includes',\n    },\n  };\n};\n"],"version":3}