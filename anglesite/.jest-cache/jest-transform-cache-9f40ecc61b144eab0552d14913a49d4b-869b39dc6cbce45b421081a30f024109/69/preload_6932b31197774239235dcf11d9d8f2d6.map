{"version":3,"names":["cov_2e9bkxdywd","actualCoverage","s","electron_1","require","contextBridge","exposeInMainWorld","send","channel","args","f","validChannels","includes","b","ipcRenderer","invoke","Promise","reject","Error","on","func","_event","once","removeAllListeners","getCurrentTheme","setTheme","theme","onThemeUpdated","callback","openExternal","url","shell","clipboard","writeText","text","readText"],"sources":["/Users/dwk/Developer/gitlab.com/davidwkeith/@dwk/anglesite/app/preload.ts"],"sourcesContent":["/**\n * @file Preload script for the Electron application.\n * @see {@link https://www.electronjs.org/docs/latest/tutorial/process-model#preload-scripts}\n */\nimport { contextBridge, ipcRenderer, shell, clipboard } from 'electron';\n\n// Expose protected methods that allow the renderer process to use\n// the ipcRenderer without exposing the entire object\ncontextBridge.exposeInMainWorld('electronAPI', {\n  send: (channel: string, ...args: unknown[]) => {\n    // Whitelist channels for security\n    const validChannels = [\n      'new-website',\n      'open-website',\n      'preview',\n      'open-browser',\n      'reload-preview',\n      'toggle-devtools',\n      'hide-preview',\n      'export-site',\n      'create-website-with-name',\n      'renderer-loaded',\n      'input-dialog-result',\n      'show-website-context-menu',\n      'delete-website',\n      'open-website-selection',\n      'website-editor-show-preview',\n      'website-editor-show-edit',\n      'load-file-preview',\n      'bagit-metadata-result',\n      'get-bagit-metadata-defaults',\n      'first-launch-result',\n    ];\n    if (validChannels.includes(channel)) {\n      ipcRenderer.send(channel, ...args);\n    }\n  },\n  invoke: (channel: string, ...args: unknown[]) => {\n    // Whitelist invoke channels for security\n    const validChannels = [\n      'list-websites',\n      'validate-website-name',\n      'rename-website',\n      'get-current-theme',\n      'set-theme',\n      'load-website-files',\n      'start-website-dev-server',\n      'get-website-files',\n      'get-file-content',\n      'save-file-content',\n      'get-file-url',\n      'get-website-server-url',\n      'load-website-preview',\n    ];\n    if (validChannels.includes(channel)) {\n      return ipcRenderer.invoke(channel, ...args);\n    }\n    return Promise.reject(new Error(`Invalid invoke channel: ${channel}`));\n  },\n  on: (channel: string, func: (...args: unknown[]) => void) => {\n    // Whitelist channels for security\n    const validChannels = [\n      'preview-loaded',\n      'preview-error',\n      'menu-new-website',\n      'menu-reload',\n      'menu-toggle-devtools',\n      'menu-export-site',\n      'show-website-name-input',\n      'website-context-menu-action',\n      'website-operation-completed',\n      'theme-updated',\n      'trigger-new-website',\n      'load-website',\n      'bagit-metadata-defaults',\n    ];\n    if (validChannels.includes(channel)) {\n      ipcRenderer.on(channel, (_event, ...args) => {\n        func(...args);\n      });\n    }\n  },\n  once: (channel: string, func: (...args: unknown[]) => void) => {\n    // Whitelist channels for security\n    const validChannels = ['bagit-metadata-defaults', 'theme-updated'];\n    if (validChannels.includes(channel)) {\n      ipcRenderer.once(channel, (_event, ...args) => {\n        func(...args);\n      });\n    }\n  },\n  removeAllListeners: (channel: string) => {\n    const validChannels = ['preview-loaded', 'preview-error'];\n    if (validChannels.includes(channel)) {\n      ipcRenderer.removeAllListeners(channel);\n    }\n  },\n\n  // Theme API methods\n  getCurrentTheme: () => ipcRenderer.invoke('get-current-theme'),\n  setTheme: (theme: string) => ipcRenderer.invoke('set-theme', theme),\n  onThemeUpdated: (callback: (...args: unknown[]) => void) => {\n    ipcRenderer.on('theme-updated', (_event, ...args) => callback(...args));\n  },\n\n  // External browser API\n  openExternal: (url: string) => {\n    shell.openExternal(url);\n  },\n\n  // Clipboard API\n  clipboard: {\n    writeText: (text: string) => {\n      clipboard.writeText(text);\n    },\n    readText: () => {\n      return clipboard.readText();\n    },\n  },\n});\n"],"mappings":"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","ignoreList":[]}